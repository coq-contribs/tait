<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8"><link rel="stylesheet" href="style.css" type="text/css"><title>Subst</title>
</head>

<body>

<h1>Library Subst</h1>

<code>
<code class="keyword">Require</code> <code class="keyword">Import</code> List.<br/>
<code class="keyword">Require</code> <a href="Term.html">Term</a>.<br/>

<br/>
</code>

<table width="100%"><tr class="doc"><td>
A substitution is a list of term plus a shift to apply to remaining 
  variables. The encoding is close to Joachimski, but uses normal lists 

</td></tr></table>
<code>

<br/>
<code class="keyword">Record</code> <a name="substitution"></a>substitution : Set := <br/>
&nbsp;mk_sub { support :&gt; <a href="http://coq.inria.fr/library/Coq.Lists.List.html#list">list</a> Term.term ; shift : <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a> }.<br/>

<br/>
<code class="keyword">Notation</code> " l # n " := (<a href="Subst.html#mk_sub">mk_sub</a> l n) (at level 20).<br/>

<br/>
<code class="keyword">Require</code> <code class="keyword">Export</code> <a href="Term.html">Term</a>.<br/>

<br/>
<code class="keyword">Definition</code> <a name="sublift"></a>sublift (rs:<a href="Subst.html#substitution">substitution</a>) := <br/>
&nbsp;([0] :: <a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> (<a href="Term.html#up">up</a> 0) rs)#(<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> rs.(<a href="Subst.html#shift">shift</a>)).<br/>
<code class="keyword">Hint</code> Unfold sublift.<br/>

<br/>
<code class="keyword">Fixpoint</code> <a name="sub"></a>sub (r:<a href="Term.html#term">term</a>)(rs:<a href="Subst.html#substitution">substitution</a>) {struct r}  : <a href="Term.html#term">term</a> := <br/>
&nbsp;match r with <br/>
&nbsp;&nbsp;| [k] =&gt; <a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">nth</a> k rs [k-length rs+rs.(shift)]<br/>
&nbsp;&nbsp;| r;s =&gt; (sub r rs);(sub s rs)<br/>
&nbsp;&nbsp;| λρ,r =&gt; λρ, sub r (<a href="Subst.html#sublift">sublift</a> rs)<br/>
&nbsp;end.<br/>

<br/>
</code>

<table width="100%"><tr class="doc"><td>
The main intended use is for beta reduction: 
    substitution of size 1 and shift 0. Example: 
</td></tr></table>
<code>

<br/>
<code class="keyword">Definition</code> <a name="sub1"></a>sub1 (r:<a href="Term.html#term">term</a>) := (r::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>)#0.<br/>
Coercion sub1 : term &gt;-&gt; substitution.<br/>

<br/>
Eval compute in (<a href="Subst.html#sub">sub</a> (λ<a href="Term.html#Iota">Iota</a>, (([0];[1]);[2];[3])) [7]).<br/>
&nbsp;<br/>
</code>

<table width="100%"><tr class="doc"><td>
The identity substitution 
</td></tr></table>
<code>

<br/>
<code class="keyword">Definition</code> <a name="id"></a>id (k:<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a>) : <a href="Subst.html#substitution">substitution</a> := (<a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> <a href="Term.html#Var">Var</a> (seq 0 k)) # k.<br/>

<br/>
<code class="keyword">Ltac</code> map_map_S := <br/>
&nbsp;rewrite map_map; simpl; rewrite &lt;- map_map with (f:=<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a>); try rewrite seq_shift.<br/>

<br/>
<code class="keyword">Lemma</code> <a name="map_up"></a>map_up : forall l, <a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> (<a href="Term.html#up">up</a> 0) (<a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> <a href="Term.html#Var">Var</a> l) = <a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> <a href="Term.html#Var">Var</a> (<a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> l).<br/>

<br/>
<code class="keyword">Lemma</code> <a name="sublift_id"></a>sublift_id : forall k, <a href="Subst.html#sublift">sublift</a> (<a href="Subst.html#id">id</a> k) = <a href="Subst.html#id">id</a> (<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> k).<br/>

<br/>
<code class="keyword">Lemma</code> <a name="sublift_id_s"></a>sublift_id_s : forall k s, <a href="Subst.html#sublift">sublift</a> (((<a href="Subst.html#id">id</a> k)++s::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>)#k) = <br/>
&nbsp;&nbsp;(<a href="Subst.html#id">id</a> (<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> k)++(<a href="Term.html#up">up</a> 0 s))#(<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> k).<br/>

<br/>
<code class="keyword">Lemma</code> <a name="sub_id"></a>sub_id : forall r k, <a href="Subst.html#sub">sub</a> r (<a href="Subst.html#id">id</a> k) = r.<br/>

<br/>
</code>

<table width="100%"><tr class="doc"><td>
sub and occurs 
</td></tr></table>
<code>

<br/>
&nbsp;<code class="keyword">Lemma</code> <a name="sub_occurs"></a>sub_occurs : <br/>
&nbsp;&nbsp;forall r (rs:<a href="Subst.html#substitution">substitution</a>) k, <a href="Subst.html#shift">shift</a> rs &lt;= <a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a> rs -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> (k + <a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a> rs - rs. <br/>

<br/>

<br/>
&nbsp;<code class="keyword">Lemma</code> <a name="sub_occurs2"></a>sub_occurs2 : forall r l k n, k &lt; l -&gt; k &lt; n -&gt; <br/>
&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> k r = <a href="Term.html#occurs">occurs</a> k (<a href="Subst.html#sub">sub</a> r ((<a href="Subst.html#id">id</a> l ++ [n]::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>) # l)).<br/>
&nbsp;<br/>
&nbsp;<code class="keyword">Lemma</code> <a name="subk_occurs_gen"></a>subk_occurs_gen : forall r l k, <br/>
&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> (<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> l+k) r = <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a> -&gt; <br/>
&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> l r = <a href="Term.html#occurs">occurs</a> (l+k) (<a href="Subst.html#sub">sub</a> r (((<a href="Subst.html#id">id</a> l)++[l+k]::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>)#l)).<br/>
&nbsp;<br/>
&nbsp;<code class="keyword">Lemma</code> <a name="subk_occurs"></a>subk_occurs : forall r k, <br/>
&nbsp;&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> (<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> k) r = <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a> -&gt; <br/>
&nbsp;&nbsp;&nbsp;<a href="Term.html#occurs">occurs</a> 0 r = <a href="Term.html#occurs">occurs</a> k (<a href="Subst.html#sub">sub</a> r k).<br/>

<br/>
</code>

<table width="100%"><tr class="doc"><td>
Down corresponds to a dummy substitution 
</td></tr></table>
<code>

<br/>
<code class="keyword">Lemma</code> <a name="down_sub"></a>down_sub : forall r l s, <a href="Term.html#occurs">occurs</a> l r = <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a> -&gt; <br/>
&nbsp;&nbsp;<a href="Term.html#down">down</a> l r = <a href="Subst.html#sub">sub</a> r (((<a href="Subst.html#id">id</a> l)++s::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>)#l).<br/>

<br/>
</code>

<table width="100%"><tr class="doc"><td>
Swapping 0 and k 
</td></tr></table>
<code>

<br/>
<code class="keyword">Definition</code> <a name="swap0"></a>swap0 (k:<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a>) : <a href="Subst.html#substitution">substitution</a> := <br/>
&nbsp;((<a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a> (<a href="Term.html#up">up</a> 0) (<a href="Subst.html#id">id</a> k) ++ [0]::<a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">nil</a>)# <a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> (<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a> k)).<br/>

<br/>
<code class="keyword">Definition</code> <a name="sub_swap0"></a>sub_swap0 (r:<a href="Term.html#term">term</a>)(k:<a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a>) := <a href="Subst.html#sub">sub</a> r (<a href="Subst.html#swap0">swap0</a> k).<br/>
</code>
<hr/><a href="index.html">Index</a><hr/><font size="-1">This page has been generated by <a href="http://www.lri.fr/~filliatr/coqdoc/">coqdoc</a></font>
</body>
</html>